{% extends 'base.html' %}
{% load i18n %}
{% block content %}
    <div>
        <div class="container">
            <div class="row">
                <div class="col-3  col-xs-12">
                    <!-- Logo -->
                    <img class="img-responsive rounded w-100" src="http://placehold.it/200X250" alt="">

                    <!--view-->
                    <!--p>Views:273</p>
                    <i class="fa  fa-thumbs-up">271</i>
                    <i class="fa fa-thumbs-down">36</i-->


                    <!-- share buttons -->
                    <div>
                        <a href="http://www.facebook.com/E-pustakalaya" class="btn btn-primary btn-icon btn-round">
                            <i class="fa fa-facebook-square"></i>
                        </a>
                        <a href="http://www.twitter.com/E-pustakalaya" class="btn btn-info btn-icon btn-round">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="http://www.google.com/E-pustakalaya" class="btn btn-default btn-icon btn-round">
                            <i class="fa fa-google-plus"></i>
                        </a>
                        <a href="http://www.linkedin.com/E-pustakalaya" class="btn btn-info btn-icon btn-round">
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </div>
                </div>
                <div class="col content-center">
                    <audio id="audio" preload="auto" tabindex="0" controls="" type="audio/mpeg">
                        <source type="audio/mp3" src="http://www.archive.org/download/bolero_69/Bolero.mp3">
                        Sorry, your browser does not support HTML5 audio.
                    </audio>
                    <ul id="playlist">
                        <li class="active"><a href="http://www.archive.org/download/bolero_69/Bolero.mp3">Ravel
                            Bolero</a></li>
                        <li><a href="http://www.archive.org/download/MoonlightSonata_755/Beethoven-MoonlightSonata.mp3">Moonlight
                            Sonata - Beethoven</a></li>
                        <li><a href="http://www.archive.org/download/CanonInD_261/CanoninD.mp3">Canon in D Pachabel</a>
                        </li>
                        <li>
                            <a href="http://www.archive.org/download/PatrikbkarlChamberSymph/PatrikbkarlChamberSymph_vbr_mp3.zip">patrikbkarl
                                chamber symph</a></li>

                    </ul>
                </div>
                <div class="col-9  col-xs-12">
                    <h4 class="text-capitalize h4 lead mt-0 pt-0 "><b>{{ object.title }}</b></h4>
                    <!-- author section -->
                    <div class="pb-1 border-line">
                        <!-- Authors -->
                        <!-- TODO pluralization -->
                        <span class="capitalize font-weight-normal text-dark">{% trans "Authors:" %}</span>
                        {% for author in object.audio_authors.all %}
                            <span class="text-secondary text-capitalize">{{ author }}</span>
                        {% endfor %}

                    </div>

                    <!-- Illustrator section -->
                    <div class="pb-1 border-line">
                        <!-- Authors -->
                        <!-- TODO pluralization -->
                        <span class="text-capitalize font-weight-normal text-dark">{% trans "illustrators:" %}</span>
                        {% for ready_by in object.audio_read_by.all %}
                            <span class="text-secondary text-capitalize"> {{ ready_by }}</span>
                        {% endfor %}


                    </div>

                    <p class="text-justify  tex-dark font-weight-normal" {% if not object.abstract %}
                       style="..." {% endif %}>{{ object.abstract }}</p>
                    <!-- Authors section -->
                    <hr/>
                    <div class="row">


                        <!-- meta data section -->
                        <div class="col-md-12 col-sm-12 col-xs-12">


                            <!-- publisher section -->
                            <div class="pb-1 border-line">

                                <span class="text-capitalize font-weight-normal text-dark">{% trans "Publisher:" %}</span>
                                <span class="text-secondary text-capitalize"> {{ object.publisher }}</span>

                            </div>

                            <!-- place of publication -->
                            <div class="pb-1 border-line">

                                <span class="text-capitalize font-weight-normal text-dark">{% trans "Place of publication:" %}</span>
                                <span class="text-secondary text-capitalize"> {{ object.place_of_publication }}</span>

                            </div>

                            <!-- Publication year -->
                            <div class="pb-1 border-line">

                                <span class="text-capitalize font-weight-normal text-dark">{% trans "publication year:" %}</span>
                                <span class="text-secondary text-capitalize"> {{ object.publication_year }}</span>

                            </div>

                            <!-- audio read by -->
                            <div class="pb-1 border-line">

                                <span class="text-capitalize font-weight-normal text-dark">{% trans "read by:" %}</span>
                                <span class="text-secondary text-capitalize"> {{ object.audio_read_by.getname }}</span>

                            </div>

                            <!-- audio type -->
                            <div class="pb-1 border-line">

                                <span class="text-capitalize font-weight-normal text-dark">{% trans "type:" %}</span>
                                {% for audio in object.audio_types.all %}
                                    <span class="text-secondary text-capitalize"> {{ audio.name }}</span>
                                {% endfor %}

                            </div>

                            <!-- audio genre -->
                            <div class="pb-1 border-line">

                                <span class="text-capitalize font-weight-normal text-dark">{% trans "genre:" %}</span>
                                <span class="text-secondary text-capitalize"> {{ object.audio_genre.genre }}</span>

                            </div>

                            <!-- audio series -->
                            <div class="pb-1 border-line">

                                <span class="text-capitalize font-weight-normal text-dark">{% trans "series name:" %}</span>
                                <span class="text-secondary text-capitalize"> {{ object.audio_series.series_name }}</span>

                            </div>

                            <!-- Available year -->
                            <div class="pb-1 border-line">

                                <span class="text-capitalize font-weight-normal text-dark">{% trans "available year:" %}</span>
                                <span class="text-secondary text-capitalize"> {{ object.created_date }}</span>

                            </div>

                            <!-- Keywords -->
                            <div class="pb-1 border-line">

                                <!-- TODO pluralization -->
                                <span class="text-capitalize font-weight-normal text-dark">{% trans "keywords:" %}</span>
                                {% for keyword in object.keywords.all %}
                                    <span class="text-secondary text-capitalize"> {{ keyword.keyword }}</span>

                                {% endfor %}


                            </div>

                            <!-- Description -->
                            <div class="pb-1 border-line" {% if not object.description %}
                                 style="display: none" {% endif %}>
                                <span class="text-capitalize font-weight-normal text-dark">{% trans "description:" %}</span>
                                <span class="text-secondary text-capitalize"> {{ object.description }}</span>

                            </div>

                            <!-- License type -->
                            <div class="pb-1 border-line">
                                <!-- TODO pluralization -->
                                <span class="capitalize font-weight-normal text-dark">{% trans "License type:" %}</span>
                                <span class="text-secondary text-capitalize"> {{ object.license_type }}</span>
                            </div>

                            <!-- Language -->
                            <div class="pb-1 border-line">
                                <!-- TODO: implement pluralization in total page -->
                                <span class="text-capitalize hidden text-dark text-capitalize">{% trans "languages" %}:</span>
                                <span class="text-secondary"> {{ object.language }}</span>
                            </div>

                            <!-- Education level -->
                            <div class="pb-1 border-line">
                                <!-- TODO: implement pluralization in total page -->
                                <span class="text-capitalize hidden text-dark text-capitalize">{% trans "education levels" %}:</span>
                                {% for education_level in object.education_levels.all %}
                                    <span class="text-secondary"> {{ object.education_level }}</span>
                                {% endfor %}
                            </div>

                            <!-- Rights -->
                            <div class="pb-1 border-line" {% if not object.custom_license %} style="..."{% endif %}>
                                <strong class="text-capitalize font-weight-normal text-dark">{% trans "right:" %}</strong>
                                <span class="text-secondary text-capitalize"> {{ object.custom_license }}</span>
                            </div>

                            <!-- sponsor -->
                            <div class="pb-1 border-line" {% if not object.sponsors %} style="..." {% endif %}>
                                <!-- TODO pluralization -->
                                <strong class="text-capitalize font-weight-normal text-dark">{% trans "sponsors:" %}</strong>
                                {% for sponsor in object.sponsors.all %}
                                    <span class="text-secondary text-capitalize"> {{ sponsor }}</span>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        var audio;
        var playlist;
        var tracks;
        var current;

        init();

        function init() {
            current = 0;
            audio = $('audio');
            playlist = $('#playlist');
            tracks = playlist.find('li a');
            len = tracks.length - 1;
            audio[0].volume = .10;
            playlist.find('a').click(function (e) {
                e.preventDefault();
                link = $(this);
                current = link.parent().index();
                run(link, audio[0]);
            });
            audio[0].addEventListener('ended', function (e) {
                current++;
                if (current == len) {
                    current = 0;
                    link = playlist.find('a')[0];
                } else {
                    link = playlist.find('a')[current];
                }
                run($(link), audio[0]);
            });
        }

        function run(link, player) {
            player.src = link.attr('href');
            par = link.parent();
            par.addClass('active').siblings().removeClass('active');
            audio[0].load();
            audio[0].play();
        }
    </script>
{% endblock content %}
